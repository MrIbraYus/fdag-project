<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FDAG Admin Dashboard</title>

      <!--  Favicon -->
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="styles-new.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar dashboard-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="/images/logo.jpg" alt="FDAG Logo" class="logo">
                <span class="brand-text">FDAG Admin Dashboard</span>
            </div>
            <div class="nav-actions">
                <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-main">
        <div class="dashboard-container">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1>Member Management</h1>
                <div class="stats-cards">
                    <div class="stat-card">
                        <h3 id="totalMembers">0</h3>
                        <p>Total Members</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="pendingMembers">0</h3>
                        <p>Pending ID Cards</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="todayRegistrations">0</h3>
                        <p>Today's Registrations</p>
                    </div>
                </div>
            </div>

            <!-- Filters and Search -->
            <div class="dashboard-controls">
                <div class="search-section">
                    <input type="text" id="searchInput" placeholder="Search by name, membership ID, or business name...">
                    <button id="searchBtn" class="search-btn">Search</button>
                </div>
                
                <div class="filters-section">
                    <select id="genderFilter">
                        <option value="">All Genders</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                    
                   

                    <select id="branchFilter" >
                        <option value="">Select Region</option>
                        <option value="Greater Accra" data-code="GAC">Greater Accra</option>
                        <option value="Ashanti" data-code="ASH">Ashanti</option>
                        <option value="Central" data-code="CEN">Central</option>
                        <option value="Western" data-code="WES">Western</option>
                        <option value="Eastern" data-code="EAS">Eastern</option>
                        <option value="Volta" data-code="VOL">Volta</option>
                        <option value="Northern" data-code="NOR">Northern</option>
                        <option value="Upper East" data-code="UEA">Upper East</option>
                        <option value="Upper West" data-code="UWA">Upper West</option>
                        <option value="Bono" data-code="BON">Bono</option>
                        <option value="Bono East" data-code="BOE">Bono East</option>
                        <option value="Ahafo" data-code="AHF">Ahafo</option>
                        <option value="Western North" data-code="WNW">Western North</option>
                        <option value="Oti" data-code="OTI">Oti</option>
                        <option value="Savannah" data-code="SAV">Savannah</option>
                        <option value="North East" data-code="NEA">North East</option>
                    </select>

                    <select id="districtFilter" class="filter-control">
                        <option value="">All Districts</option>
                        <!-- Populate district options dynamically or statically -->
                    </select>
                    
                    <select id="educationFilter">
                        <option value="">All Education Levels</option>
                        <option value="Basic">Basic</option>
                        <option value="Senior">Senior</option>
                        <option value="Tertiary">Tertiary</option>
                        <option value="Vocational">Vocational</option>
                    </select>
                    
                    <input type="date" id="dateFromFilter" placeholder="From Date">
                    <input type="date" id="dateToFilter" placeholder="To Date">
                    
                    <button id="clearFilters" class="clear-btn">Clear Filters</button>
                </div>
                
                <div class="export-section">
                    <button id="exportAllBtn" class="export-btn">Export All</button>
                    <button id="exportFilteredBtn" class="export-btn">Export Filtered</button>
                </div>
            </div>

            <!-- Data Table -->
            <div class="table-container">
                <table id="membersTable" class="members-table">
                    <thead>
                        <tr>
                            <th>Photo</th>
                            <th>Full Name</th>
                            <th>DOB</th>
                            <th>Gender</th>
                            <th>Region</th>
                            <th>Membership ID</th>
                            <th>Declaration</th>
                            <th>Submission Date</th>
                            <th>ID Card Issued</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="membersTableBody">
                        <!-- Data will be populated here -->
                    </tbody>
                </table>
                
                <div id="loadingIndicator" class="loading-indicator">
                    <div class="loading-spinner"></div>
                    <p>Loading members...</p>
                </div>
                
                <div id="noDataMessage" class="no-data-message" style="display: none;">
                    <p>No members found matching your criteria.</p>
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination-container">
                <div class="pagination-info">
                    <span id="paginationInfo">Showing 0-0 of 0 members</span>
                </div>
                <div class="pagination-controls">
                    <button id="prevPageBtn" class="pagination-btn" disabled>Previous</button>
                    <div id="pageNumbers" class="page-numbers"></div>
                    <button id="nextPageBtn" class="pagination-btn" disabled>Next</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Image Modal -->
    <div id="imageModal" class="modal image-modal" style="display: none;">
        <div class="modal-content image-modal-content">
            <div class="modal-header">
                <h3>Member Photo</h3>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <img id="modalImage" src="/placeholder.svg" alt="Member Photo">
                <div class="image-actions">
                    <a id="downloadImageBtn" href="" download class="download-btn">Download Image</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Member Information</h3>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editMemberId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFullName">Full Name</label>
                            <input type="text" id="editFullName" required>
                        </div>
                        <div class="form-group">
                            <label for="editContactNumber">Contact Number</label>
                            <input type="tel" id="editContactNumber" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGender">Gender</label>
                            <select id="editGender" required>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editEducation">Education Level</label>
                            <select id="editEducation" required>
                                <option value="Basic">Basic</option>
                                <option value="Senior">Senior</option>
                                <option value="Tertiary">Tertiary</option>
                                <option value="Vocational">Vocational</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editHomeAddress">Home Address</label>
                        <textarea id="editHomeAddress" rows="3" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="closeEditModal()" class="modal-btn secondary">Cancel</button>
                <button onclick="saveEdit()" class="modal-btn primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Deletion</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this member? This action cannot be undone.</p>
                <p><strong>Member:</strong> <span id="deleteMemberName"></span></p>
            </div>
            <div class="modal-footer">
                <button onclick="closeDeleteModal()" class="modal-btn secondary">Cancel</button>
                <button onclick="confirmDelete()" class="modal-btn danger">Delete Member</button>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
